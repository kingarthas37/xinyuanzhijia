<!DOCTYPE html>
<html>
<head>
    <% include ../partials/meta %>
    <title><%= title %></title>
    <% include ../partials/css %>
</head>
<body>

<% include ../partials/header %>

<div class="am-cf admin-main">

    <!-- sidebar start -->
    <% include ../partials/sidebar %>
    <!-- sidebar end -->

    <!-- content start -->
    <div class="admin-content admin-product-page">

        <div class="am-cf am-padding">
            <div class="am-fl am-cf">
                <strong><a href="/admin/product">产品编辑</a></strong> / <a href="/admin/product/edit/<%= product.get('productId') %>">编辑产品</a>
            </div>
        </div>

        <div class="am-g">
            <div class="am-u-sm-12">

                <form id="form-edit-product" class="am-form" action="/admin/product/edit/<%= product.get('productId') %>" method="post">

                    <!-- name start -->
                    <div class="am-form-group">
                        <label for="name">产品名称<i>*</i>:</label>
                        <input id="name" required name="name" type="text" placeholder="输入产品名称[必填]" value="<%= product.get('name') %>" />
                    </div>

                    <div class="am-form-group">
                        <label for="name-en">产品名称英文:</label>
                        <input id="name-en" name="name-en" type="text" placeholder="输入产品名称英文" value="<%= product.get('nameEn') %>" />
                    </div>
                    <!-- name end -->

                    <hr>

                    <!-- main image start -->
                    <div class="am-form-group">
                        <label for="main-image">产品主展示图片： </label>
                        <div><iframe class="upload" src="/admin/product/upload" frameborder="0"></iframe></div>
                        <input id="main-image" name="main-image" type="hidden" value="<%= JSON.parse(product.get('mainImage')) %>" />
                        <ul class="main-image-list">
                            <% if (mainImage) { %>
                                <% for (var i=0;i< mainImage.length; i++) { %>
                                    <li data-id="<%= mainImage[i].id%>"><p><a href="<%= mainImage[i].url%>" target="_blank"><img src="<%= mainImage[i].url %>"/></a></p><p><a class="move" href="javascript:;">前移</a> <a class="remove" href="javascript:;">删除</a></p></li>
                                <% } %>
                            <% } %>
                        </ul>
                    </div>
                    <!-- main image end -->
                    <hr>

                    <!-- select category start -->
                    <div class="am-form-group">
                        <label for="select-category-1">选择商品一级分类<i>*</i>:</label>
                        <div>
                            <select id="select-category-1" name="select-category-1" required>
                                <option value="">请选择商品分类</option>
                                <% for (var i=0;i < category1.length; i++) { %>
                                <option <% if (category1[i].get('category1Id') === product.get('category1Id')){ %> selected="selected" <% } %> value="<%= category1[i].get('category1Id'); %>" ><%=category1[i].get('name'); %> </option>
                                <% } %>
                            </select>
                        </div>
                    </div>
                    <!-- select category end -->

                    <hr/>

                    <!-- select category start -->
                    <div class="am-form-group">
                        <label for="select-category-2">选择商品二级分类<i>*</i>:</label>
                        <div>
                            <select id="select-category-2" name="select-category-2" required >
                                <option value="">请选择商品分类</option>
                                <% for (var i=0;i < category2.length; i++) { %>
                                <option <% if (category2[i].get('category2Id') === product.get('category2Id')){ %> selected="selected" <% } %> value="<%= category2[i].get('category2Id'); %>" ><%=category2[i].get('name'); %> </option>
                                <% } %>
                            </select>
                        </div>
                    </div>
                    <!-- select category end -->

                    <hr/>

                    <!-- banner start -->
                    <div class="am-form-group am-form-select">
                        <label for="select-banner">选择商品匹配的 Banner：</label>
                        <div>
                            <select id="select-banner" name="select-banner">
                                <option value="">不选择</option>
                                <% for(var i=0;i< banner.length; i++) { %>
                                <option <% if(banner[i].get('bannerId') === product.get('bannerId')) {%> selected="selected" <%} %> value="<%= banner[i].get('bannerId') %>" data-src="<%= banner[i].get('bannerUrl') %>"><%= banner[i].get('bannerText') %></option>
                                <% } %>
                            </select>
                        </div>
                    </div>
                    
                    <div class="banner-view <% if(!product.get('bannerId')) { %>hide<% } %>"><% for(var i=0;i<banner.length;i++){ %><% if(banner[i].get('bannerId') === product.get('bannerId')) { %><img src="<%= banner[i].get('bannerUrl') %>" width="400" /><% }%><% } %></div>
                    <!-- banner end -->

                    <hr/>

                    <!-- detail start -->
                    <div class="am-form-group">
                        <label for="detail">输入产品详情<small>(md5)</small>:</label>
                        <textarea id="detail" name="detail" rows="5" placeholder="输入产品详情[必填]"><%= product.get('detail') %></textarea>
                    </div>

                    <div class="am-form-group">
                        <label for="detail-en">输入产品详情英文<small> (md5)</small>:</label>
                        <textarea id="detail-en" name="detail-en" rows="5" placeholder="输入产品详情(英文)"><%= product.get('detailEn') %></textarea>
                    </div>
                    <!-- detail end -->

                    <hr/>

                    <!-- description start -->
                    <div class="am-form-group">
                        <label for="description">产品简述(主要用于列表展示页):</label>
                        <input type="text" id="description" name="description" placeholder="输入产品简述" value="<%= product.get('description') %>">
                    </div>
                    <!-- description end -->

                    <hr/>

                    <!-- review start -->
                    <div class="am-form-group">
                        <label for="review">店主评语 <small>(md5)</small>:</label>
                        <textarea id="review" name="review" rows="3" placeholder="输入店主评语"><%= product.get('review') %></textarea>
                    </div>
                    <!-- review end -->

                    <hr/>

                    <!-- property start -->
                    <div class="am-form-group">
                        <label for="property">产品属性 <small>(md5)</small>:</label>
                        <textarea id="property" name="property" rows="3" placeholder="输入产品属性"><%= product.get('property') %></textarea>
                    </div>

                    <div class="am-form-group">
                        <label for="property-en">产品属性英文 <small>(md5)</small>:</label>
                        <textarea id="property-en" name="property-en" rows="3" placeholder="输入产品属性英文"><%= product.get('propertyEn') %></textarea>
                    </div>
                    <!-- property end -->

                    <hr/>

                    <!-- instruction start -->
                    <div class="am-form-group">
                        <label for="instruction">产品说明 <small>(md5)</small>:</label>
                        <textarea id="instruction" name="instruction" rows="3" placeholder="输入产品说明"><%= product.get('instruction') %></textarea>
                    </div>

                    <div class="am-form-group">
                        <label for="instruction-en">产品说明英文 <small>(md5)</small>:</label>
                        <textarea id="instruction-en" name="instruction-en" rows="3" placeholder="输入产品说明英文"><%= product.get('instructionEn') %></textarea>
                    </div>
                    <!-- instruction end -->

                    <hr/>

                    <!-- use start -->
                    <div class="am-form-group">
                        <label for="use">产品使用说明 <small>(md5)</small>:</label>
                        <textarea id="use" name="use" rows="5" placeholder="输入产品使用说明"><%= product.get('use') %></textarea>
                    </div>

                    <div class="am-form-group">
                        <label for="use-en">产品使用说明英文 <small>(md5)</small>:</label>
                        <textarea id="use-en" name="use-en" rows="5" placeholder="输入产品使用说明英文"><%= product.get('useEn') %></textarea>
                    </div>
                    <!-- use end -->

                    <hr/>

                    <!-- images start -->
                    <div class="am-form-group">
                        <label for="image">产品图片 <small>(md5)</small> ：</label>
                        <textarea id="image" name="image" rows="5" placeholder="输入产品图片"><%= product.get('image') %></textarea>
                    </div>
                    <!-- images end -->

                    <hr/>

                    <!-- video start -->
                    <div class="am-form-group">
                        <label for="video">产品视频：</label>
                        <input id="video" name="video" type="text" placeholder="输入产品视频" value="<%= product.get('video') %>" />
                    </div>
                    <!-- video end -->

                    <hr/>

                    <div class="am-form-group">
                        <button id="submit" type="submit" class="am-btn am-btn-primary">保存</button>
                        <a href="/admin/product/preview-taobao" target="_blank" class="am-btn am-btn-success">预览淘宝页</a>
                        <a href="/admin/product/preview-web" target="_blank" class="am-btn am-btn-success">预览网页</a>
                        <button type="button" class="am-btn am-btn-primary" onclick="history.back(-1);">返回</button>
                    </div>

                </form>

            </div>
        </div>

    </div>
    <!-- content end -->

</div>


<% include ../partials/footer %>
<% include ../partials/js %>

<script type="text/javascript">
    var product;
    
    $(function () {

        var upload;

        product = require('product');
        upload = require('upload');

        product.editFun();
    });

    //iframe upload callback
    function uploadFileResponse(data) {
        product.uploadFileResponse(data);
    }
</script>
</body>
</html>

 