require=function o(n,e,i){function t(a,u){if(!e[a]){if(!n[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(r)return r(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var l=e[a]={exports:{}};n[a][0].call(l.exports,function(o){var e=n[a][1][o];return t(e?e:o)},l,l.exports,o,n,e,i)}return e[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)t(i[a]);return t}({4:[function(o,n,e){"use strict";o("../../../../js/main"),o("./config"),o("./common"),o("./common-dom")},{"../../../../js/main":13,"./common":2,"./common-dom":1,"./config":3}],3:[function(o,n,e){"use strict";window.leanApp={AppID:"QuiPuWpJPzCahsgBK7teBOJN-gzGzoHsz",AppKey:"Wwh9RRHIySPlvToe3dsIVfS7",MasterKey:"mCIsLsrtOgujruzfcEGDm9Uh",api:"https://api.leancloud.cn/1.1/"}},{}],2:[function(o,n,e){"use strict";o("amazeui");$(function(){window.leanAppHeader={"x-avoscloud-application-id":window.leanApp.AppID,"x-avoscloud-application-key":window.leanApp.AppKey,"content-type":"application/json"};for(var o,n=function(){},e=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],i=e.length,t=window.console=window.console||{};i--;)o=e[i],t[o]||(t[o]=n);jQuery.validator.addMethod("isMobile",function(o,n){var e=o.length,i=/^(13[0-9]{9})|(18[0-9]{9})|(14[0-9]{9})|(17[0-9]{9})|(15[0-9]{9})$/;return this.optional(n)||11==e&&i.test(o)},"请正确填写您的手机号码")})},{amazeui:6}],1:[function(o,n,e){"use strict";$(function(){$(".go-back").click(function(){history.go(-1)})})},{}]},{},[4]);
require=function e(r,t,n){function i(s,a){if(!t[s]){if(!r[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var m=t[s]={exports:{}};r[s][0].call(m.exports,function(e){var t=r[s][1][e];return i(t?t:e)},m,m.exports,e,r,t,n)}return t[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({5:[function(e,r,t){"use strict";e("../../../../js/main"),e("./user")},{"../../../../js/main":13,"./user":"user"}],user:[function(e,r,t){"use strict";r.exports={loginFun:function(){var e=$("#form"),r=$("#mobile"),t=$("#code"),n=$("#submit");e.validate({rules:{mobile:{required:!0,minlength:11,isMobile:!0},code:{required:!0,minlength:6,maxlength:6}},messages:{mobile:{required:"请输入您的手机号码",minlength:"请输入正确的手机号码",isMobile:"请输入正确的手机号码"},code:{required:"请输入6位数验证码",minlength:"请输入6位数验证码",maxlength:"请输入6位数验证码"}},errorPlacement:function(e,r){r.parents(".am-form-group").next().html(e)},submitHandler:function(e){var i=$(e);return i.data("state")?!1:(i.data("state",!0),n.prop("disabled",!0).text("登录中..."),void $.ajax({type:"post",url:"/user/login/to-login/"+$.trim(r.val())+"/"+$.trim(t.val())}).done(function(e){e.success?(n.text("登录成功!"),setTimeout(function(){e.isMobileLogin?location.href="/":location.href="/user/userinfo"},1e3)):(n.prop("disabled",!1).text("登录"),i.data("state",!1),t.parents(".am-form-group").next().html("验证码有误或已过期,请重新输入!"))}))}}),!function(){var n=$(".get-smscode"),i=n.find("a"),o=n.find("em"),s=o.find("b");i.click(function(){e.trigger("submit");var i=$.trim(r.val());r.hasClass("valid")&&$.ajax({type:"get",url:"/user/login/get-smscode/"+i}).done(function(e){e.success?!function(){var e=60;s.text(e),n.addClass("on");var r=setInterval(function(){e--,s.text(e),0===e&&(clearInterval(r),n.removeClass("on"))},1e3)}():t.parents(".am-form-group").next().html("请求超时,请稍后再试!")})})}(),r.on({keyup:function(){$.trim(this.value)?n.prop("disabled",!1):n.prop("disabled",!0)}})},userInfoFun:function(){$("form").validate({rules:{mobile:{required:!0,minlength:11,isMobile:!0}},messages:{mobile:{required:"请输入您的手机号码",minlength:"请输入正确的手机号码",isMobile:"请输入正确的手机号码"}},errorPlacement:function(e){$(".message").html(e)}})}}},{}]},{},[5]);