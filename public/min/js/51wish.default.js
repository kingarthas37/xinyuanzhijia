require=function n(i,e,a){function o(r,c){if(!e[r]){if(!i[r]){var s="function"==typeof require&&require;if(!c&&s)return s(r,!0);if(t)return t(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=e[r]={exports:{}};i[r][0].call(u.exports,function(n){var e=i[r][1][n];return o(e?e:n)},u,u.exports,n,i,e,a)}return e[r].exports}for(var t="function"==typeof require&&require,r=0;r<a.length;r++)o(a[r]);return o}({4:[function(n,i,e){"use strict";n("../../../../js/main"),n("./config"),n("./common"),n("./common-dom")},{"../../../../js/main":15,"./common":2,"./common-dom":1,"./config":3}],3:[function(n,i,e){"use strict";window.leanApp={AppID:"QuiPuWpJPzCahsgBK7teBOJN-gzGzoHsz",AppKey:"Wwh9RRHIySPlvToe3dsIVfS7",MasterKey:"mCIsLsrtOgujruzfcEGDm9Uh",api:"https://api.leancloud.cn/1.1/"}},{}],2:[function(n,i,e){"use strict";n("amazeui");$(function(){window.WIN_WIDTH=$(window).width(),window.WIN_HEIGHT=$(window).height(),window.leanAppHeader={"x-avoscloud-application-id":window.leanApp.AppID,"x-avoscloud-application-key":window.leanApp.AppKey,"content-type":"application/json"};for(var n,i=function(){},e=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],a=e.length,o=window.console=window.console||{};a--;)n=e[a],o[n]||(o[n]=i);jQuery.validator.addMethod("isMobile",function(n,i){var e=n.length,a=/^1[0-9]{10}$/;return this.optional(i)||11==e&&a.test(n)},"请正确填写您的手机号码")})},{amazeui:6}],1:[function(n,i,e){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o=n("bloodhound");$(function(){$(".go-back").click(function(){history.go(-1)}),$("img.lazy").lazyload(),!function(){var n=$(".search-go-panel"),i=$("#search-box"),e=$(".search-close").find("a"),a=$("#search-input");n.click(function(){i.offCanvas("open")}),e.click(function(){i.offCanvas("close")}),i.on("open.offcanvas.amui",function(){a[0].focus()}),i.on("close.offcanvas.amui",function(){})}(),!function(){var n=$(".am-alert");n.length&&(n.fadeIn(),setTimeout(function(){return n.fadeOut()},2e3))}(),!function(){var n=$("#search-input"),i=$(".search-select"),e=i.find(".am-dropdown-content"),a=i.find(".am-btn");i.on("close.dropdown.amui",function(n){}),e.find("a").click(function(){e.find(".am-active").removeClass("am-active"),$(this).parent().addClass("am-active"),i.dropdown("close"),a.find("em").text($(this).text()),n.attr("placeholder","搜索"+$(this).text()),n[0].focus()})}(),!function(){var n=$("#search-box"),i=(n.find(".search"),n.find("#search-input"));i.typeahead(null,{display:function(n){return n.value},highlight:!0,templates:{suggestion:function(n){return'<div><a href="/">'+n.value+"</a></div>"}},source:new o({datumTokenizer:o.tokenizers.obj.whitespace("value"),queryTokenizer:o.tokenizers.whitespace,remote:{url:"/suggest",prepare:function(n,e){return e.data={name:$.trim(i.val())},e}}})}),n.find(".tt-menu").css({width:WIN_WIDTH})}(),!function(){var n=$(".main-list");n.infinitescroll({debug:!1,loading:{img:"//51wish.cn/min/images/admin/common/loading.gif",msgText:"加载中..."},animate:!1,itemSelector:"li",navSelector:".navigation",nextSelector:".navigation a",dataType:"json",appendCallback:!1,pathParse:function(n,i){return["/search/ajax?page=",location.search.replace("?","&")]}},function(i,e){if(!i.items.length){var o=function(){$("#infscr-loading").detach(),n.infinitescroll("unbind");var i=$('<div id="infscr-loading" style="display: none;">当前选择下已加载全部内容</div>');return n.append(i),i.fadeIn(),setTimeout(function(){i.fadeOut()},2e3),{v:!1}}();if("object"===("undefined"==typeof o?"undefined":a(o)))return o.v}var t="";$.each(i.items,function(n,i){var e=i.price>0?parseFloat(i.price):0,a=function(){var n="";for(var e in i.mainImage)if(i.mainImage[e].isMainImage){n=i.mainImage[e].url;break}return n}(),o=i.stock>0?'<span class="active"><i class="am-icon-check"></i>现货</span>':"",r=i.isRefund?'<span class="active"><i class="am-icon-history"></i>7天退款</span>':"",c=i.isHandmade?'<span class="active"><i class="am-icon-modx"></i>纯手工</span>':"",s=i.isOnly?'<span class="active"><i class="am-icon-gavel"></i>只此一件 </span>':"";t+='\n                    <li>\n                        <div class="img">\n                            <a href="/detail/'+i.productId+'"><img src="/min/images/default/common/lazy.png" class="lazy" width="100" height="100" data-original="'+a+'?imageMogr2/thumbnail/200"></a>\n                        </div>\n                        <div class="detail">\n                            <h3><a href="/detail/'+i.productId+'">'+i.name+'</a></h3>\n                            <p>\n                            <span class="price">¥ <strong>'+e+"</strong></span>\n                            <span>"+i.pageViews+"次浏览</span>\n                            </p>\n                            <p>\n                                "+o+" "+r+" "+c+" "+s+"\n                            </p>\n                        </div>\n                    </li>\n                "});var r=$(t);r.find("img.lazy").lazyload(),n.append(r)})}()})},{bloodhound:7}]},{},[4]);
require=function e(t,r,i){function n(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){var r=t[a][1][e];return n(r?r:e)},d,d.exports,e,t,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({5:[function(e,t,r){"use strict";e("../../../../js/main"),e("./index"),e("./user")},{"../../../../js/main":15,"./index":"index","./user":"user"}],user:[function(e,t,r){"use strict";t.exports={loginFun:function(){var e=$("#form"),t=$("#mobile"),r=$("#code"),i=$("#submit"),n=$("#referer");e.validate({rules:{mobile:{required:!0,minlength:11,isMobile:!0},code:{required:!0,minlength:6,maxlength:6}},messages:{mobile:{required:"请输入您的手机号码",minlength:"请输入正确的手机号码",isMobile:"请输入正确的手机号码"},code:{required:"请输入6位数验证码",minlength:"请输入6位数验证码",maxlength:"请输入6位数验证码"}},errorPlacement:function(e,t){t.parents(".am-form-group").next().html(e)},submitHandler:function(e){var o=$(e);return o.data("state")?!1:(o.data("state",!0),i.prop("disabled",!0).text("登录中..."),void $.ajax({type:"post",url:"/user/login/to-login/"+$.trim(t.val())+"/"+$.trim(r.val())}).done(function(e){e.success?(i.text("登录成功!"),setTimeout(function(){location.href=n.val()},2e3)):(i.prop("disabled",!1).text("登录"),o.data("state",!1),r.parents(".am-form-group").next().html("验证码有误或已过期,请重新输入!"))}))}}),this.getSmsCode(t),t.on({keyup:function(){$.trim(this.value)?i.prop("disabled",!1):i.prop("disabled",!0)}})},userInfoFun:function(){var e=$("#form"),t=$("#submit"),r=$("#modal-confirm");e.validate({rules:{nickname:{required:!0},birthday:{dateISO:!0}},messages:{nickname:{required:"请输入您的用户名/昵称"},birthday:{dateISO:"请输入有效的日期 (1990/12/31)"}},errorPlacement:function(e){$(".message").html(e)},submitHandler:function(){t.prop("disabled",!0),$.ajax({type:"post",url:"/user/userinfo/edit",data:e.serialize()}).then(function(e){t.prop("disabled",!1),e.success&&(r.modal({closeViaDimmer:0}),setTimeout(function(){location.href="/"},3e3))},function(e){t.prop("disabled",!1),alert(e)})}})},mobileFun:function(){var e=$("#form"),t=$("#mobile"),r=$("#code"),i=$("#submit"),n=$("#modal-confirm"),o=$("#member-id");this.getSmsCode(t),e.validate({rules:{mobile:{required:!0,minlength:11,isMobile:!0},code:{required:!0,minlength:6,maxlength:6}},messages:{mobile:{required:"请输入您的手机号码",minlength:"请输入正确的手机号码",isMobile:"请输入正确的手机号码"},code:{required:"请输入6位数验证码",minlength:"请输入6位数验证码",maxlength:"请输入6位数验证码"}},errorPlacement:function(e,t){t.parents(".am-form-group").next().html(e)},submitHandler:function(e){var a=$(e);return a.data("state")?!1:(a.data("state",!0),i.prop("disabled",!0).text("更新中..."),void $.ajax({type:"post",url:"/user/mobile/update/"+$.trim(t.val())+"/"+$.trim(r.val())+"/"+o.val()}).done(function(e){e.success?(n.modal({closeViaDimmer:0}),setTimeout(function(){location.href="/"},3e3)):(i.prop("disabled",!1).text("更新/绑定手机号"),a.data("state",!1),r.parents(".am-form-group").next().html("验证码有误或已过期,请重新输入!"))}))}}),t.on({keyup:function(){$.trim(this.value)?i.prop("disabled",!1):i.prop("disabled",!0)}})},getSmsCode:function i(e){var i=$(".get-smscode"),t=i.find("a"),r=i.find("em"),n=r.find("b");t.click(function(){var t=$.trim(e.val());return t?/^1[0-9]{10}$/.test(t)?void(e.hasClass("valid")&&$.ajax({type:"get",url:"/user/login/get-smscode/"+t}).done(function(e){e.success?!function(){var e=59;n.text(e),i.addClass("on");var t=setInterval(function(){e--,n.text(e),0===e&&(clearInterval(t),i.removeClass("on"))},1e3)}():i.parents(".am-form-group").next().html("请求超时,请稍后再试!")})):($(".error-mobile").text("请输入正确的手机号码"),e[0].focus(),!1):(e[0].focus(),!1)})}}},{}],index:[function(e,t,r){"use strict";t.exports={indexFun:function(){$(".am-slider").flexslider({directionNav:!1})}}},{}]},{},[5]);